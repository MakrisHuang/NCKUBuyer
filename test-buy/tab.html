<!doctype html>
<html ng-app="myApp">
    <head>
      <meta charset="utf-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
      <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0" />
      <title>Tabs component</title>
	  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>

      <link rel="stylesheet" href="mobile-angular-ui-base.min.css" />
      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0/angular.js"></script>

      <script src="mobile-angular-ui.min.js"></script>
      <script src="mobile-angular-ui.gestures.min.js"></script>

	  <script type="text/javascript" src="bootstrap.min.js"></script>
	  <link rel="stylesheet" type="text/css" href="bootstrap.min.css">
	  <link rel="stylesheet" type="text/css" href="bootstrap-theme.min.css">

      <link rel="stylesheet" type="text/css" href="style.css">
      <script>
        angular.module("myApp", ['mobile-angular-ui'])
        .controller('MainCtrl', [function(){
        	var self = this;
        	self.stores = [
				{"id": 0,
				 "name": "store 1",
				 "items": [
				 		{"food": "food1-1", 
				 		 "price": 10
				 		}, 
				 		{"food": "food1-2", 
				 		 "price": 20
				 		},
				 		{"food": "food1-3", 
				 		 "price": 30
				 		}
					]
				}, 
				{"id": 1,
				 "name": "store 2",
				 "items": [
				 		{"food": "food2-1", 
				 		 "price": 40
				 		}, 
				 		{"food": "food2-2", 
				 		 "price": 50
				 		},
				 		{"food": "food2-3", 
				 		 "price": 60
				 		}
					]
				}, 
				{"id": 2,
				 "name": "store 3",
				 "items": [
				 		{"food": "food3-1", 
				 		 "price": 70
				 		}, 
				 		{"food": "food3-2", 
				 		 "price": 80
				 		},
				 		{"food": "food3-3", 
				 		 "price": 90
				 		}
					]
				}
			];
			self.activeTab = 0;
			self.setActiveTab = function(tab){
				self.activeTab = tab;
			}
			self.getCurrentItems = function(){
				return self.stores[self.activeTab].items;
			}

			self.getCurrentStore = function(){
				return self.stores[self.activeTab];
			}
        }]);
      </script>
    </head>
    <body ng-controller="MainCtrl as ctrl">
      <div class="scrollable">
        <div class="scrollable-content">
          <div class='section'>
			<ui-shared-state id='activeTab' default='1'></ui-shared-state>
			
			<!-- store tab -->
			<div class="row">
				<div class="col-xs-12">
					<ul class="nav nav-tabs nav-justified" >
					  <li ng-repeat="store in ctrl.stores">
					    <a class="col-xs-3" ng-click="ctrl.setActiveTab(store.id)">{{store.name}}</a>
					  </li>
					</ul>
				</div>
			</div>
			
			<!-- food item -->
			<div ng-repeat="item in ctrl.getCurrentItems()">
				<div ng-show="ctrl.activeTab == ctrl.getCurrentStore().id">
					<div class="container">
						<div class="row">
							<div class="col-xs-12">
								<ul class="nav nav-pills">
									<li role="presentation" class="col-xs-3"><h4>{{item.food}}</h4></li>
							  		<li role="presentation" class="col-xs-3"><h4>${{item.price}}</h4></li>
							  	
							  		<li role="presentation" class="col-xs-3"><button type="button" class="btn btn-default">Add</button></li>
								  	
							  	</ul>
					  		</div>
					  	</div>
				  	</div>
			  	</div>
			</div>

          </div>
        </div>
      </div>
    </body>
</html>